<html>
  <body>
    <script>
      function isSame(map1, map2) {
        for (const [key, val] of map2) {
          if (!map1.has(key) || map1.get(key) !== val) return false;
        }

        return true;
      }

      function solution(s, t) {
        let answer = 0;
        const map1 = new Map();
        const map2 = new Map();
        const n = t.length;

        const ss = s.slice(0, n);

        for (const s of t) {
          if (map1.has(s)) {
            map1.set(s, map1.get(s) + 1);
          } else {
            map1.set(s, 1);
          }
        }

        for (const s of ss) {
          if (map2.has(s)) {
            map2.set(s, map2.get(s) + 1);
          } else {
            map2.set(s, 1);
          }
        }

        if (isSame(map1, map2)) answer++;

        for (let i = n; i < s.length; i++) {
          map2.delete(s[i - n]);
          map2.set(s[i], map2.get(s[i]) ? map2.get(s[i]) - 1 : 1);

          if (isSame(map1, map2)) answer++;
        }

        return answer;
      }

      const s = "bacaAacba";
      const t = "abc";
      console.log(solution(s, t));
    </script>
  </body>
</html>
