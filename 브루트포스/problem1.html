<html>
  <script>
    function solution(arr) {
      let answer,
        max = Number.MIN_SAFE_INTEGER;

      for (const n of arr) {
        let sum = 0,
          tmp = n;
        while (tmp) {
          sum += tmp % 10;
          tmp = Math.floor(tmp / 10);
        }
        if (sum > max) {
          max = sum;
          answer = n;
        } else if (sum === max) {
          answer = Math.max(answer, n);
        }
      }

      return answer;
    }

    console.log(solution([128, 460, 603, 40, 521, 137, 123]));
  </script>
</html>
