<html>
  <script>
    function solution(arr) {
      let answer,
        max = Number.MIN_SAFE_INTEGER;

      for (const n of arr) {
        let sum = String(n)
          .split("")
          .reduce((a, b) => a + Number(b), 0);

        if (sum > max) {
          max = sum;
          answer = n;
        } else if (sum === max) {
          answer = Math.max(answer, n);
        }
      }

      return answer;
    }

    console.log(solution([128, 460, 603, 40, 521, 137, 123]));
  </script>
</html>
